
<!DOCTYPE html>
<html class=" ">
    <head>
        <!-- 
         * @Package: Complete Admin - Responsive Theme
         * @Subpackage: Bootstrap
         * @Version: 2.2
         * This file is part of Complete Admin Theme.
        -->
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <meta charset="utf-8" />
        <title>综合管理</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta content="" name="description" />
        <meta content="" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        
        <link rel="shortcut icon" href="../assets/images/favicon.png" type="image/x-icon" />    <!-- Favicon -->
        <link rel="apple-touch-icon-precomposed" href="../assets/images/apple-touch-icon-57-precomposed.png">	<!-- For iPhone -->
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/images/apple-touch-icon-114-precomposed.png">    <!-- For iPhone 4 Retina display -->
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/images/apple-touch-icon-72-precomposed.png">    <!-- For iPad -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/images/apple-touch-icon-144-precomposed.png">    <!-- For iPad Retina display -->

        <!-- CORE CSS FRAMEWORK - START -->
        <link href="__ROOT__/Style/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="__ROOT__/Style/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/plugins/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/fonts/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/css/animate.min.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/plugins/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/css/css.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/css/css1.css" rel="stylesheet" type="text/css"/>
        <link href='__ROOT__/Style/css/layer.css'>

        <!-- CORE CSS FRAMEWORK - END -->

        <!-- HEADER SCRIPTS INCLUDED ON THIS PAGE - START --> 
        
        
        <link href="__ROOT__/Style/plugins/jvectormap/jquery-jvectormap-2.0.1.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="__ROOT__/Style/plugins/datatables/css/jquery.dataTables.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="__ROOT__/Style/plugins/datatables/extensions/TableTools/css/dataTables.tableTools.min.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="__ROOT__/Style/plugins/datatables/extensions/Responsive/css/dataTables.responsive.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="__ROOT__/Style/plugins/datatables/extensions/Responsive/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" type="text/css" media="screen"/>

        <!-- HEADER SCRIPTS INCLUDED ON THIS PAGE - END --> 


        <!-- CORE CSS TEMPLATE - START -->
        <link href="__ROOT__/Style/css/style.css" rel="stylesheet" type="text/css"/>
        <link href="__ROOT__/Style/css/responsive.css" rel="stylesheet" type="text/css"/>
        <!-- CORE CSS TEMPLATE - END -->

        <!--地图API-->
        <script src="http://api.map.baidu.com/api?key=&v=1.1&services=true"></script>
        <!--地图API-->
    </head>
    <!-- END HEAD -->

    <!-- BEGIN BODY -->
    <body class=" ">
    <!-- START TOPBAR -->
    <include file="Public/header" />
<!-- END TOPBAR -->
<!-- START CONTAINER -->
<div class="page-container row-fluid container-fluid">

    <!-- SIDEBAR - START -->

<div class="page-sidebar fixedscroll">

    <!-- MAIN MENU - START -->
    <include file="Public/getMenus" />
    <!-- MAIN MENU - END -->



</div>
<!--  SIDEBAR - END -->
    <!-- START CONTENT -->
<section id="main-content" class=" ">

    <section class="wrapper main-wrapper row" style=''>
        <!--<div class='mbx'>
            <i class='fa fa-home'></i>
            <a href="">首页</a>/
            <a href="">易管理</a>/
            <span>用户管理</span>
        </div>-->
        <div class="col-lg-12">
            <section class="box ">

                    <div class='xzen xzen1'>

                        <h3>物联网设备-编辑</h3>
                        <ul style='padding-top:40px; padding-bottom:50px;'>
                            <form method="post" enctype="multipart/form-data">
                                <li>
                                    <span>设备号：</span>
                                    <input type='' name="deviceid" value="<{$info.deviceid}>" required>
                                </li>
                                <li>
                                    <span>监控点名称：</span>
                                    <input type='' name="name" value="<{$info.name}>" >
                                </li>
                                <if condition="$THINK.SESSION.admin.dept_id eq 0">
                                <li>
                                    <span>部门：</span>
                                    <select name="dept">
                                    <option value="0">请选择</option>
                                    <option value="1" <eq name="info.dept" value="1"> selected </eq> >农办</option>
                                    <option value="2" <eq name="info.dept" value="2"> selected </eq> >林业局</option>
                                    <option value="3" <eq name="info.dept" value="3"> selected </eq> >畜牧局</option>
                                    <option value="4" <eq name="info.dept" value="4"> selected </eq> >水务局</option>
                                    <option value="5" <eq name="info.dept" value="5"> selected </eq> >气象局</option>
                                    <option value="6" <eq name="info.dept" value="6"> selected </eq> >粮食局</option>
                                    <option value="7" <eq name="info.dept" value="7"> selected </eq> >农广校</option>
                                    <option value="8" <eq name="info.dept" value="8"> selected </eq> >农机局</option>
                                    <option value="9" <eq name="info.dept" value="9"> selected </eq> >农业局</option>
                                    </select>
                                </li>
                                </if>
                                <li>
                                    <span>监控地点：</span>
                                    <input type='' style="width: 150px;" name="lng" id="lng" value="<{$info.lng}>" required >
                                    <input type='' style="width: 150px;" name="lat" id="lat" value="<{$info.lat}>" required >
                                </li>
                                <li style="margin-left: 100Px;color: red;">*请点击地图拾取</li>
                                <li>
                                    <div style="width:550px;height:400px;border:#ccc solid 1px;margin-left: 100px;" id="dituContent"></div><br/>
                                </li>
                                <input type="hidden" name="id" value="<{$info.id}>" />
                                <li class='xh-an'>
                                    <button class='que' type="submit" style="margin-right: 100px;">保存</button>
                                    <button type="button" onclick="location.href='__URL__/devices'" class="czhi">返回</button>
                                </li>
                            </form>
                        </ul>
                    </div>
                </section>
            </div>
    <!-- MAIN CONTENT AREA STARTS -->
    
<!-- MAIN CONTENT AREA ENDS -->
    </section>
</section>



<div class="chatapi-windows ">




</div>    </div>
<div class='zhao'></div>
    <!-- END CONTAINER -->
<!-- LOAD FILES AT PAGE END FOR FASTER LOADING -->


<!-- CORE JS FRAMEWORK - START --> 
<script src="__ROOT__/Style/js/jquery-1.11.2.min.js" type="text/javascript"></script> 
<script src="__ROOT__/Style/js/jquery.easing.min.js" type="text/javascript"></script> 
<script src="__ROOT__/Style/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script> 
<script src="__ROOT__/Style/plugins/pace/pace.min.js" type="text/javascript"></script>  
<script src="__ROOT__/Style/plugins/perfect-scrollbar/perfect-scrollbar.min.js" type="text/javascript"></script> 
<script src="__ROOT__/Style/plugins/viewport/viewportchecker.js" type="text/javascript"></script>  
<script>window.jQuery||document.write('<script src="__ROOT__/Style/js/jquery-1.11.2.min.js"><\/script>');</script>
<!-- CORE JS FRAMEWORK - END --> 


<!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - START --> 

<!-- <script src="__ROOT__/Style/plugins/jvectormap/jquery-jvectormap-2.0.1.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" type="text/javascript"></script> -->
<!-- <script src="__ROOT__/Style/js/dashboard.js" type="text/javascript"></script> -->
<!-- <script src="__ROOT__/Style/plugins/echarts/echarts-custom-for-dashboard.js" type="text/javascript"></script> -->
<!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - END --> 


<script src="__ROOT__/Style/plugins/datatables/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/datatables/extensions/Responsive/js/dataTables.responsive.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/datatables/extensions/Responsive/bootstrap/3/dataTables.bootstrap.js" type="text/javascript"></script>
<!-- CORE TEMPLATE JS - START --> 
<script src="__ROOT__/Style/js/scripts.js" type="text/javascript"></script>
<script type="text/javascript" src='__ROOT__/Style/js/layer.js'></script>  
<!-- END CORE TEMPLATE JS - END --> 


<!-- General section box modal start -->
<div class="modal" id="section-settings" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog animated bounceInDown">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Section Settings</h4>
            </div>
            <div class="modal-body">

                Body goes here...

            </div>
            <div class="modal-footer">
                <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                <button class="btn btn-success" type="button">Save changes</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    // 当前经纬度
    var map_x = '<{$info.lng}>';
    var map_y = '<{$info.lat}>';

    //创建和初始化地图函数：
    function initMap(){
        createMap();//创建地图
        setMapEvent();//设置地图事件
        addMapControl();//向地图添加控件
        addMarker();//向地图中添加marker
    }

    //创建地图函数：
    function createMap(){
        var map = new BMap.Map("dituContent");//在百度地图容器中创建一个地图
        var point = new BMap.Point(map_x,map_y);//定义一个中心点坐标
        map.centerAndZoom(point,15);//设定地图的中心点和坐标并将地图显示在地图容器中
        window.map = map;//将map变量存储在全局
        map.addEventListener("click", getXy);
    }

    //地图事件设置函数：
    function setMapEvent(){
        map.enableDragging();//启用地图拖拽事件，默认启用(可不写)
        map.enableScrollWheelZoom();//启用地图滚轮放大缩小
        map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)
        map.enableKeyboard();//启用键盘上下左右键移动地图
    }

    //地图控件添加函数：
    function addMapControl(){
        //向地图中添加缩放控件
        var ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_SMALL});
        map.addControl(ctrl_nav);
        //向地图中添加缩略图控件
        var ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:0});
        map.addControl(ctrl_ove);
        //向地图中添加比例尺控件
        var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_RIGHT});
        map.addControl(ctrl_sca);
    }

    //标注点数组
    var myMarker = {title:"",content:"",point:''+map_x+'|'+map_y,isOpen:0,icon:{w:23,h:25,l:46,t:21,x:9,lb:12}};
    var curMarker = null;

    //创建marker
    function addMarker(){
        var json = myMarker;
        var p0 = json.point.split("|")[0];
        var p1 = json.point.split("|")[1];
        var point = new BMap.Point(p0,p1);
        var iconImg = createIcon(json.icon);
        var marker = new BMap.Marker(point,{icon:iconImg});
        map.addOverlay(marker);
        curMarker = marker;
    }
    //创建InfoWindow
    function createInfoWindow(i){
        var json = markerArr[i];
        var iw = new BMap.InfoWindow("<b class='iw_poi_title' title='" + json.title + "'>" + json.title + "</b><div class='iw_poi_content'>"+json.content+"</div>");
        return iw;
    }
    //创建一个Icon
    function createIcon(json){
        var icon = new BMap.Icon("http://app.baidu.com/map/images/us_mk_icon.png", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})
        return icon;
    }

    function getXy(e){
        //alert(e.point.lng + ", " + e.point.lat);
        $('#lng').val(e.point.lng);
        $('#lat').val(e.point.lat);
        curMarker.setPoint(e.point);
    }

    initMap();//创建和初始化地图
</script>
</body>
</html>



