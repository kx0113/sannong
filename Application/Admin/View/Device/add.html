<!DOCTYPE html>
<html class=" ">
<head>
    <!--
     * @Package: Complete Admin - Responsive Theme
     * @Subpackage: Bootstrap
     * @Version: 2.2
     * This file is part of Complete Admin Theme.
    -->
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta charset="utf-8" />
    <title>综合管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="shortcut icon" href="../assets/images/favicon.png" type="image/x-icon" />    <!-- Favicon -->
    <link rel="apple-touch-icon-precomposed" href="../assets/images/apple-touch-icon-57-precomposed.png">	<!-- For iPhone -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/images/apple-touch-icon-114-precomposed.png">    <!-- For iPhone 4 Retina display -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/images/apple-touch-icon-72-precomposed.png">    <!-- For iPad -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/images/apple-touch-icon-144-precomposed.png">    <!-- For iPad Retina display -->

    <!-- CORE CSS FRAMEWORK - START -->
    <link href="__ROOT__/Style/plugins/pace/pace-theme-flash.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="__ROOT__/Style/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/plugins/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/fonts/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/css/animate.min.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/plugins/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/css/css.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/css/css1.css" rel="stylesheet" type="text/css"/>
    <link href='__ROOT__/Style/css/layer.css'>

    <!-- CORE CSS FRAMEWORK - END -->

    <!-- HEADER SCRIPTS INCLUDED ON THIS PAGE - START -->


    <link href="__ROOT__/Style/plugins/jvectormap/jquery-jvectormap-2.0.1.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="__ROOT__/Style/plugins/datatables/css/jquery.dataTables.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="__ROOT__/Style/plugins/datatables/extensions/TableTools/css/dataTables.tableTools.min.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="__ROOT__/Style/plugins/datatables/extensions/Responsive/css/dataTables.responsive.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="__ROOT__/Style/plugins/datatables/extensions/Responsive/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" type="text/css" media="screen"/>

    <!-- HEADER SCRIPTS INCLUDED ON THIS PAGE - END -->


    <!-- CORE CSS TEMPLATE - START -->
    <link href="__ROOT__/Style/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="__ROOT__/Style/css/responsive.css" rel="stylesheet" type="text/css"/>
    <!-- CORE CSS TEMPLATE - END -->
    <style>


        input[type="text"], input[type="password"],select, input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
            display: inline-block;
            height: 30px;
            padding: 4px 6px;
            margin-bottom: 10px;
            font-size: 14px;
            line-height: 20px;
            color: #555;
            vertical-align: middle;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
        }
        .modal-body{
            min-height: 600px;
            height: 600px;

        }
        .modal-dialog{
            width:60%;
            margin:  10px 20%;
        }
        /*@media (min-width: 768px)*/
            /*.modal-dialog {*/
                /*width: 800px;*/
                /*height:600px;*/
                /*margin: 30px auto;*/
            /*}*/
            /*.modal-dialog {*/
                /*position: relative;*/
                /*width: auto;*/
                /*margin: 10px;*/
            /*}*/
    </style>
</head>
<!-- END HEAD -->

<!-- BEGIN BODY -->
<body class=" ">
<!-- START TOPBAR -->
<include file="Public/header" />
<!-- END TOPBAR -->
<!-- START CONTAINER -->
<div class="page-container row-fluid container-fluid">

    <!-- SIDEBAR - START -->

    <div class="page-sidebar fixedscroll">

        <!-- MAIN MENU - START -->
        <include file="Public/getMenus" />
        <!-- MAIN MENU - END -->

    </div>
    <!--  SIDEBAR - END -->
    <!-- START CONTENT -->
    <section id="main-content" class=" ">

        <section class="wrapper main-wrapper row" style=''>
            <!--<div class='mbx'>
                <i class='fa fa-home'></i>
                <a href="">首页</a>/
                <a href="">易管理</a>/
                <span>用户管理</span>
            </div>-->
            <div class="col-lg-12">
                <section class="box ">
                    <header class="panel_header">
                        <h2 class="title pull-left">设备的添加</h2>
                    </header>

                    <div class="content-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <form method="post" action="/admin/device/addDeviceInfo" enctype="multipart/form-data">
                                    <div>
                                        <ul>
                                            <li class='cle'>
                                                <span>设备编号：</span>
                                                <label>
                                                    <input type="text" class="padd" id="device_code" name="device_code" value="{$device_code}">
                                                    <input name="id" type="hidden" value="{$id}">
                                                    <eq name="state" value="000001">
                                                        <b style="color:#ff4747;line-height:30px;display:inline-block;position: relative; top: -4px;">设备编号唯一</b>
                                                    </eq>
                                                </label>
                                            </li>
                                            <li class='cle'>
                                                <span>设备名称：</span>
                                                <label>
                                                    <input type="text" class="padd" id="device_name" name="device_name" value="{$device_name}">
                                                    <eq name="state" value="000002">
                                                        <b style="color:#ff4747;line-height:30px;display:inline-block;position: relative; top: -4px;">同一个区域不能存在相同名字的设备</b>
                                                    </eq>
                                                </label>
                                            </li>
                                            <li class='cle'>
                                                <span>类 型：</span>
                                                <label>
                                                    <select id="type" name="type" ">
                                                        <option value="">类型</option>
                                                        <option value="1" <eq name="type" value="1">selected</eq>>棚室</option>
                                                        <option value="2" <eq name="type" value="2">selected</eq>>室外</option>
                                                    </select>
                                                </label>
                                            </li>
                                            <li class='cle'>
                                                <span>所属区域：</span>
                                                <label>
                                                    <select id="areaFirst" name="areaFirst" >
                                                        <option value="">一级区域</option>
                                                        <foreach name="firstAreaList" item="vo">
                                                            <option value="{$vo.id}" <eq name="vo.id" value="$thridAreaInfo['cid']">selected</eq>>{$vo.areaName}</option>
                                                        </foreach>
                                                    </select>
                                                    <select id="areaSec" name="areaSec" >
                                                        <option value="">二级区域</option>
                                                        <foreach name="secondAreaList" item="vo">
                                                            <option value="{$vo.id}" <eq name="vo.id" value="$thridAreaInfo['bid']">selected</eq>>{$vo.areaName}</option>
                                                        </foreach>
                                                    </select>
                                                    <select id="areaThird" name="areaThird" >
                                                        <option value="">三级区域</option>
                                                        <foreach name="thirdAreaList" item="vo">
                                                            <option value="{$vo.id}" <eq name="vo.id" value="$thridAreaInfo['id']">selected</eq>>{$vo.areaName}</option>
                                                        </foreach>
                                                    </select>
                                                </label>
                                            </li>

                                            <li class='cle'>
                                                <span>经纬度</span>
                                                <label>
                                                    <input type="text" class="padd" id="lat" name="lat" value="{$lat}">

                                                </label>
                                                <a href="javasrcipt:;" class="btn btn-primary btn-sm" data-toggle="modal"    data-target="#myModal">
                                                    地图选点
                                                </a>
                                            </li>

                                            <li class='cle'>
                                                <span>管 理 员：</span>
                                                <label>
                                                    <select id="admin" name="admin" >
                                                        <option value="">管理员</option>
                                                        <foreach name="admin_list" item="vo">
                                                            <option value="{$vo.id}" <eq name="vo.id" value="$admin_id">selected</eq>>{$vo.name}</option>
                                                        </foreach>
                                                    </select>
                                                </label>
                                            </li>
                                            <li class='cle'>
                                                <span>设备通道号：</span>
                                                <label>
                                                    <input type="text" class="padd" id="channel_number" name="channel_number" value="{$channel_number}">
                                                </label>
                                            </li>
                                            <li class='cle'>
                                                <span>备&nbsp;&nbsp;&nbsp;&nbsp;注：</span>
                                                <label>
                                                    <input type="text" class="padd" id="note" name="note" value="{$note}">
                                                </label>
                                            </li>
                                        </ul>
                                        <p class='a-btn' style='padding-left:95px;'>
                                            <button style="background: #ff6600;border: none;color: #fff;padding: 6px 18px;border-radius: 4px;" type="submit" onclick=" return yanzheng()">提交</button>
                                            <!--<a href="">重置</a>-->
                                        </p>
                                    </div>
                                </form>
                            </div>
                            <div class="dataTables_paginate paging_bootstrap" id="example-1_paginate">
                                <ul class="pagination">
                                    {$page}
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- MAIN CONTENT AREA STARTS -->

            <!-- MAIN CONTENT AREA ENDS -->
        </section>
    </section>
    <div class="chatapi-windows ">
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close"
                            data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        模态框（Modal）标题
                    </h4>
                </div>
                <div class="modal-body">
                    <iframe id="getPoint" src="{:U('/admin/device/mapGetPoint')}" width="100%" height="100%">

                    </iframe>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"
                            data-dismiss="modal">关闭
                    </button>
                    <button type="button" id="save" data-dismiss="modal" class="btn btn-primary">
                        提交更改
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
</div>
<div class='zhao'></div>
<!-- END CONTAINER -->
<!-- LOAD FILES AT PAGE END FOR FASTER LOADING -->


<!-- CORE JS FRAMEWORK - START -->
<script src="__ROOT__/Style/js/jquery-1.11.2.min.js" type="text/javascript"></script>

<script src="__ROOT__/Style/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/pace/pace.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/perfect-scrollbar/perfect-scrollbar.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/viewport/viewportchecker.js" type="text/javascript"></script>
<script>window.jQuery||document.write('<script src="__ROOT__/Style/js/jquery-1.11.2.min.js"><\/script>');</script>
<!-- CORE JS FRAMEWORK - END -->


<!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - START -->

<!-- <script src="__ROOT__/Style/plugins/jvectormap/jquery-jvectormap-2.0.1.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" type="text/javascript"></script> -->
<!-- <script src="__ROOT__/Style/js/dashboard.js" type="text/javascript"></script> -->
<!-- <script src="__ROOT__/Style/plugins/echarts/echarts-custom-for-dashboard.js" type="text/javascript"></script> -->
<!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - END -->


<script src="__ROOT__/Style/plugins/datatables/extensions/Responsive/js/dataTables.responsive.min.js" type="text/javascript"></script>
<script src="__ROOT__/Style/plugins/datatables/extensions/Responsive/bootstrap/3/dataTables.bootstrap.js" type="text/javascript"></script>
<!-- CORE TEMPLATE JS - START -->
<script src="__ROOT__/Style/js/scripts.js" type="text/javascript"></script>
<script type="text/javascript" src='__ROOT__/Style/js/layer.js'></script>
<!-- END CORE TEMPLATE JS - END -->
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=700b132845ef5b0b135066dfa0222a37"></script>
<script type="text/javascript" src='http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js'></script>


<!-- General section box modal start -->
<div class="modal" id="section-settings" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog animated bounceInDown">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Section Settings</h4>
            </div>
            <div class="modal-body">

                Body goes here...

            </div>
            <div class="modal-footer">
                <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
                <button class="btn btn-success" type="button">Save changes</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('.table1 span.dx-zi').click(function(event) {
        $(this).toggleClass('on');
    });

</script>
<script type="text/javascript">

    function shanc(){
        if ($('.dx-zi.on').length>0) {
            $('.dx-zi').each(function(index, el) {
                if ($(this).hasClass('on')) {
                    $(this).parents('tr').remove();
                };
            });
        }else{
            layer.msg('请选择', {icon: 1});
        }
    }
    $('.dx-zi1').on('click',function(){
        if($(this).attr('data-on') == 1){
            $(this).attr('data-on','0' );
            $('.dx-zi').each(function(){
                $(this).addClass('on');
            })
        }else{
            $(this).attr('data-on','1' );
            $('.dx-zi').each(function(){
                $(this).removeClass('on');
            })
        }
    })

    $("#areaFirst").change(function () {
        var id = $(this).val();

        $('#areaSec').empty()

        $.ajax({
            url: "/admin/area/ajaxAreaSecond",
            data:{id:id},
            type: "POST",
            success: function(data){
                var html = '<option value="">第二级区域</option>';

                if(data.ret == 200)
                {
                    for(var i=0;i<data['data'].length;i++){

                        html+= " <option value='"+data['data'][i]['id']+"'>"+data['data'][i]['areaName']+"</option>";

                    }
                }

                $('#areaSec').append(html);
            }});
    })

    $("#areaSec").change(function () {
        var id = $(this).val();

        $('#areaThird').empty()

        $.ajax({
            url: "/admin/area/ajaxAreaThird",
            data:{id:id},
            type: "POST",
            success: function(data){
                var html = '<option value="">第三级区域</option>';

                if(data.ret == 200)
                {
                    for(var i=0;i<data['data'].length;i++){

                        html+= " <option value='"+data['data'][i]['id']+"'>"+data['data'][i]['areaName']+"</option>";

                    }
                }

                $('#areaThird').append(html);
            }});
    })

    $('#save').click(function(){

        var point = $("#getPoint").contents().find("#pointInput");
        $("#lat").val(point.val());





    })


    function yanzheng(){
        if($('#device_code').val()==''){
            alert('请填写设备设备号!');
            return false;
        }

        if($('#device_name').val()==''){
            alert('请填写设备名字!');
            return false;
        }

        if($('#type').val()==''){
            alert('请填写设备类型!');
            return false;
        }
        if($('#areaThird').val()==''){
            alert('请填写设备所在区域！');
            return false;
        }

        if($('#lat').val()==0){
            alert('请选择在地图上的位置！');
            return false;
        }

    }

</script>

<script>
    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(117.532852,36.686999);
    map.centerAndZoom(point, 15);
    var marker = new BMap.Marker(point);  // 创建标注
    map.setCurrentCity("章丘市");
    map.addOverlay(marker);               // 将标注添加到地图中
    marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画



</script>
</body>
</html>
